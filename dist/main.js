(()=>{"use strict";const e=e=>{const t=document.createElement("img");return t.setAttribute("src","./img/"+e+"Led.png"),t.id=e,t.classList.add("led"),t};let t,s,r;const n=(e,n,a)=>{switch(e){case"green":return n&&a?["yellow","red"]:n?[s,r]:t;case"yellow":return n&&a?["green","red"]:n?[t,r]:s;case"red":return n&&a?["green","yellow"]:n?[t,s]:r}},a=(e,n)=>{switch(e){case"green":t=n;break;case"yellow":s=n;break;case"red":r=n}},i=e=>{a(e,!0),n(e,!0,!0).forEach((e=>{a(e,!1)}))},c=()=>{t=!0,s=!1,r=!1};c();const d=io("ws://localhost:8080"),l=()=>{n("yellow")&&n("green")&&n("red")?d.emit("message",{status:"7"}):n("yellow")&&n("red")?d.emit("message",{status:"6"}):n("green")&&n("red")?d.emit("message",{status:"5"}):n("green")&&n("yellow")?d.emit("message",{status:"4"}):n("red")?d.emit("message",{status:"3"}):n("yellow")?d.emit("message",{status:"2"}):n("green")?d.emit("message",{status:"1"}):d.emit("message",{status:"0"})},g=(()=>{const t=document.querySelector("main"),s=document.querySelector("li.ledLi"),r=document.querySelector("ul.ledSection");return s.addEventListener("mouseenter",(()=>r.classList.add("visible"))),r.addEventListener("mouseleave",(()=>r.classList.remove("visible"))),r.childNodes.forEach((e=>{e.addEventListener("click",(e=>{o.changePage(e.target.id)}))})),{changeDom:s=>{t.textContent="","singleLed"==s?t.appendChild(e("green")):(t.appendChild(e("green")),t.appendChild(e("yellow")),t.appendChild(e("red")))},changeLedImage:(e,t)=>{const s=document.getElementById(e);s.setAttribute("src","./img/"+t+"Led.png"),s.id=t},turnLedsOpacity:(e,t)=>{Array.isArray(e)||document.querySelector("#"+e).classList.remove("off"),Array.isArray(t)&&t.forEach((e=>{(e=document.querySelector("#"+e)).classList.add("off")}))}}})(),o=(()=>{let e;const t=()=>e,s=e=>{"trafficLights"==t()?(i(e),g.turnLedsOpacity(e,n(e,!0,!0))):0==n(e)?(a(e,!0),g.turnLedsOpacity(e,"")):(a(e,!1),g.turnLedsOpacity([""],[e]))},r=()=>{let e=t();if(c(),l(),"singleLed"==e)document.querySelector("img#green").addEventListener("click",(()=>{a("green",!n("green")),1==n("green")?g.changeLedImage("off","green"):g.changeLedImage("green","off"),l()}));else if("multipleLeds"==e)document.querySelectorAll("img.led").forEach((e=>{e.addEventListener("click",(()=>{let t=e.id;s(t),l()}))}));else if("trafficLights"==e){a("green",!1);let e=()=>{c(),"trafficLights"==t()&&(s("green"),l(),setTimeout((()=>{"trafficLights"==t()&&(s("yellow"),l())}),4e3),setTimeout((()=>{"trafficLights"==t()&&(s("red"),l())}),7e3),setTimeout(e,11e3))};e()}};return{changePage:t=>{g.changeDom(t),"multipleLeds"==t&&(i("green"),g.turnLedsOpacity("green",n("green",!0,!0))),e=t,r()},activateListener:r}})();o.changePage("singleLed")})();